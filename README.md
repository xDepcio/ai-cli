ai-cli
=================

Terminal completions for bash using github copilot

<!-- toc -->
* [Requirements](#requirements)
* [Installation](#installation)
* [Usage](#usage)
* [Customization](#customization)
* [Commands](#commands)
<!-- tocstop -->

# Requirements
- `bash` - Core CLI used to generate prompts doesn't depend on specific shell, however it was tested only with bash and on-keypress completion generation depends on bash specific features, so I don't think it will work with other shells.

All other dependencies are installed automatically by installation script, which fetches node.js application with correct node.js version already bundled together.

# Installation
Easiest way to install is to use installation script.
```bash
curl https://raw.githubusercontent.com/xDepcio/ai-cli/master/src/bash/install.sh | bash
```

# Usage

Before first run, you need to sign in to github to enable copilot completions.
```bash
ai-cli-signin
```

Now whenever you want to get autocompletion suggestions inside terminal, press `Alt+q` shortcut which will print dimmed suggestion.

To accept whole suggestion press `Ctrl+Space` or `Ctrl+n` to accept single word.

# Customization
All of the configuration is done in `config.sh` file located in `$AI_CLI_SCRIPTS_DIR` directory.

### Prompt
To achieve best results, copilot needs more information than only current text input. E.g. `$PWD` variable, commands history, etc. By default prompt looks like this:
```bash
$ ls -al "$(ls -al $PWD)"
$ $READLINE_LINE
```

Where `$READLINE_LINE` is replaced by current terminal input. You can customize this prompt by editing `$AI_CLI_PROMPT` variable inside config file.

### Modes

(not recommended) You can change completion suggestions daemon operation mode by changing `$AI_CLI_MODE` variable inside config file. However, I don't recommend other modes, since they were created for private use, require root access (strace), and are not thoroughly tested.

### Keybindings
Default keybindings for default mode are:
- `Alt+q` - Print completion suggestion
- `Ctrl+Space` - Accept whole suggestion
- `Ctrl+n` - Accept single word

You can change them by editing `$AI_CLI_*_KEYBIND` variables inside config file.

# Commands
Below is the documentation automatically generated by oclif for each command avalible in core CLI used by ai-cli. You shouldn't use them directly, but they are here for reference.
<!-- commands -->
* [`ai-cli chat`](#ai-cli-chat)
* [`ai-cli complete`](#ai-cli-complete)
* [`ai-cli daemon`](#ai-cli-daemon)
* [`ai-cli help [COMMAND]`](#ai-cli-help-command)
* [`ai-cli inotify-daemon`](#ai-cli-inotify-daemon)
* [`ai-cli passive-completion-daemon`](#ai-cli-passive-completion-daemon)
* [`ai-cli signin`](#ai-cli-signin)
* [`ai-cli strace-daemon`](#ai-cli-strace-daemon)

## `ai-cli chat`

Get GPT-4o chat completion.

```
USAGE
  $ ai-cli chat [-f <value> | -t <value>]

FLAGS
  -f, --file=<value>  Read JSON chat messages from file.
  -t, --text=<value>  Read JSON chat messages as flag's value

DESCRIPTION
  Get GPT-4o chat completion.
  chat schema:
  {
  role: "user" | "assistant",
  content: string
  }[]

EXAMPLES
  $ ai-cli chat -f chat.json

  $ ai-cli chat -t '[{"role":"user","content":"command for changing file permissionss on ubuntu."}]'
```

_See code: [src/commands/chat.ts](https://github.com/xDepcio/ai-cli/blob/v0.0.1/src/commands/chat.ts)_

## `ai-cli complete`

```
USAGE
  $ ai-cli complete -l <value> [-f <value>] [-t <value>] [-s] [-p <value>]

FLAGS
  -f, --file=<value>       Take prompt from file
  -l, --language=<value>   (required) Specify completion language.
  -p, --prePrompt=<value>  Text to prepend to prompt.
  -s, --stdin              Use stdin redirection for prompt
  -t, --text=<value>       Take prompt from text string

EXAMPLES
  $ ai-cli complete -l python -f main.py

  $ ai-cli complete -s <<EOF

  $ ai-cli complete -s <prompt.txt

  $ ai-cli complete -f prompt.txt

  $ ai-cli complete -t "Copilot complete this line..."
```

_See code: [src/commands/complete.ts](https://github.com/xDepcio/ai-cli/blob/v0.0.1/src/commands/complete.ts)_

## `ai-cli daemon`

```
USAGE
  $ ai-cli daemon
```

_See code: [src/commands/daemon.ts](https://github.com/xDepcio/ai-cli/blob/v0.0.1/src/commands/daemon.ts)_

## `ai-cli help [COMMAND]`

Display help for ai-cli.

```
USAGE
  $ ai-cli help [COMMAND...] [-n]

ARGUMENTS
  COMMAND...  Command to show help for.

FLAGS
  -n, --nested-commands  Include all nested commands in the output.

DESCRIPTION
  Display help for ai-cli.
```

_See code: [@oclif/plugin-help](https://github.com/oclif/plugin-help/blob/v6.2.7/src/commands/help.ts)_

## `ai-cli inotify-daemon`

```
USAGE
  $ ai-cli inotify-daemon
```

_See code: [src/commands/inotify-daemon.ts](https://github.com/xDepcio/ai-cli/blob/v0.0.1/src/commands/inotify-daemon.ts)_

## `ai-cli passive-completion-daemon`

```
USAGE
  $ ai-cli passive-completion-daemon
```

_See code: [src/commands/passive-completion-daemon.ts](https://github.com/xDepcio/ai-cli/blob/v0.0.1/src/commands/passive-completion-daemon.ts)_

## `ai-cli signin`

Sign in to Github.

```
USAGE
  $ ai-cli signin

DESCRIPTION
  Sign in to Github.
```

_See code: [src/commands/signin.ts](https://github.com/xDepcio/ai-cli/blob/v0.0.1/src/commands/signin.ts)_

## `ai-cli strace-daemon`

```
USAGE
  $ ai-cli strace-daemon -p <value>

FLAGS
  -p, --pid=<value>  (required) bash pid to trace
```

_See code: [src/commands/strace-daemon.ts](https://github.com/xDepcio/ai-cli/blob/v0.0.1/src/commands/strace-daemon.ts)_
<!-- commandsstop -->
